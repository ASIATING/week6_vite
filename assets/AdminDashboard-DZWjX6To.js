import{a as i}from"./axios-Bo0ATomq.js";import{_ as m,r,o as d,c as k,a as e,d as t,w as n,h as g,i as f,b as c,p as b,k as x}from"./index-BcQhMzjf.js";var $={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:_}=$,V={mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");i.defaults.headers.common.Authorization=s,this.checkLogin()},data(){return{checkSuccess:!1}},methods:{checkLogin(){document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1")?i.post(`${_}/api/user/check`).then(o=>{this.checkSuccess=!0,console.log("已登入"),this.$router.push("/admin/products")}).catch(o=>{alert(o.response.data.message),this.$router.push("/login")}):(alert("請先登入"),this.$router.push("/login"))},logout(){i.post(`${_}/logout`).then(s=>{document.cookie="hexToken=;expires=;",console.log(s),console.log("已登出"),this.$router.push("/login")}).catch(s=>{alert(s)})}}},h=s=>(b("data-v-a6df8884"),s=s(),x(),s),I={class:"container-fluid"},S={class:"row"},T={class:"navbar navbar-expand-md navbar-light bg-light fixed-top"},w={class:"container-fluid"},A=h(()=>e("a",{class:"navbar-brand",href:"/admin/products"},"後台",-1)),E=h(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),N={class:"collapse navbar-collapse",id:"navbarNav"},R={class:"navbar-nav"},B={class:"nav-item"},L={class:"nav-item"},C={class:"nav-item"},D={class:"nav-item"},P={class:"nav-item"},y={class:"mainArea"},O={class:"container"};function z(s,o,H,M,u,l){const a=r("RouterLink"),p=r("RouterView");return d(),k("div",I,[e("div",S,[e("nav",T,[e("div",w,[A,E,e("div",N,[e("ul",R,[e("li",B,[t(a,{to:"/",class:"nav-link"},{default:n(()=>[c("回到前台")]),_:1})]),e("li",L,[t(a,{to:"/admin/products",class:"nav-link"},{default:n(()=>[c("後台產品列表")]),_:1})]),e("li",C,[t(a,{to:"/admin/orders",class:"nav-link"},{default:n(()=>[c("後台訂單")]),_:1})]),e("li",D,[t(a,{to:"/admin/coupons",class:"nav-link"},{default:n(()=>[c("優惠卷管理")]),_:1})]),e("li",P,[e("a",{href:"#",class:"nav-link",onClick:o[0]||(o[0]=(...v)=>l.logout&&l.logout(...v))},"登出")])])])])])]),e("div",y,[e("main",O,[u.checkSuccess?(d(),g(p,{key:0})):f("",!0)])])])}const q=m(V,[["render",z],["__scopeId","data-v-a6df8884"]]);export{q as default};
