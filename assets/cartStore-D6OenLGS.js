import{x as c}from"./index-CV-0e3G1.js";import{a as i}from"./axios-Bo0ATomq.js";import{S as a}from"./sweetalert2.all-Cp6tZLLl.js";var l={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:n,VITE_PATH:r}=l,p=c("cartStore",{state:()=>({count:0,cartsNum:0,artEmpty:!1,cart:{},productModal:null,loadingItem:""}),actions:{increment(){this.count+=1},addToCart(t,o=1){console.log("pinia");const e=`${n}/api/${r}/cart`;i.post(e,{data:{product_id:t,qty:o}}).then(s=>{console.log(s),this.cartsNum=s.data.data.length,console.log("this.cartsNum",this.cartsNum),a.fire({position:"top-end",icon:"success",title:`${s.data.message}`,showConfirmButton:!1,toast:!0,timer:1500})}).catch(s=>{a.fire({position:"top-end",icon:"error",title:`${s.response.data.message}`,showConfirmButton:!1,toast:!0,timer:1500})})},getCart(){const t=`${n}/api/${r}/cart`;i.get(t).then(o=>{console.log("pinnacCarttt"),console.log(o.data),this.cart=o.data.data,this.cart.total===0?this.cartEmpty=!0:this.cartEmpty=!1}).catch(o=>{alert(o)})},updateCart(t){console.log("pinnnnna"),this.loadingItem=t.id;const o=`${n}/api/${r}/cart/${t.id}`;i.put(o,{data:{product_id:t.product_id,qty:t.qty}}).then(e=>{this.loadingItem="",a.fire({position:"top-end",icon:"success",title:`${e.data.message}`,showConfirmButton:!1,toast:!0,timer:1500}),this.getCart()}).catch(e=>{this.loadingItem="",a.fire({position:"top-end",icon:"error",title:`${e.response.data.message}`,showConfirmButton:!1,toast:!0,timer:1500})})},removeCartItem(t){console.log("pinnnnna");const o=`${n}/api/${r}/cart/${t}`;this.loadingItem=t,i.delete(o).then(e=>{this.loadingItem="",a.fire({position:"top-end",icon:"success",title:`${e.data.message}`,showConfirmButton:!1,toast:!0,timer:1500}),this.getCart()}).catch(e=>{a.fire({position:"top-end",icon:"error",title:`${e.response.data.message}`,showConfirmButton:!1,toast:!0,timer:1500})})},clearCart(){console.log("pinnnnna"),a.fire({title:"確定要清空購物車嗎?",text:" 清空後無法復原! ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定，我要清空購物車!",cancelButtonText:"取消"}).then(t=>{if(t.isConfirmed){const o=`${n}/api/${r}/carts`;i.delete(o).then(e=>{a.fire({title:"刪除成功!",text:e.data.message,icon:"success"}).then(()=>{this.getCart()})}).catch(e=>{a.fire({title:"Error!",text:e.response.data.message,icon:"error"})})}})}}});export{p as c};
