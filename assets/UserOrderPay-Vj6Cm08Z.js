import{a as P}from"./axios-Bo0ATomq.js";import{S as j}from"./sweetalert2.all-US3IRVOt.js";import{_ as q,r as c,o as a,c as u,b as d,w as A,a as t,t as o,F as H,j as U,x as z,s as M,p as Y,k as G}from"./index-l4rZ5sXX.js";var J={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:F,VITE_PATH:L}=J,K={data(){return{isLoading:!0,products:[],cart:{},qty:1,orderInfo:{},productModal:null,loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},mounted(){this.getOrder(this.$route.params.id)},methods:{getOrder(n){P.get(`${F}/api/${L}/order/${n}`).then(e=>{this.orderInfo=e.data.order}).catch(e=>{alert(e.response.data.message)})},payOrder(){const n=`${F}/api/${L}/pay/${this.$route.params.id}`;P.post(n).then(e=>{j.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),this.getOrder(this.$route.params.id)}).catch(e=>{alert(e.response.data.message)})},formatDate(n){const e=new Date(n*1e3),p=e.getFullYear(),h=("0"+(e.getMonth()+1)).slice(-2),s=("0"+e.getDate()).slice(-2);return`${p}-${h}-${s}`}}},r=n=>(Y("data-v-7def9158"),n=n(),G(),n),Q={class:"container vh-100"},W={class:"table table-bordered table-hover align-middle"},X=r(()=>t("th",null,"訂單時間",-1)),Z=r(()=>t("th",null,"訂單編號",-1)),tt=r(()=>t("th",null,"訂購人姓名",-1)),et=r(()=>t("th",null,"聯絡信箱",-1)),st=r(()=>t("th",null,"聯絡電話",-1)),ot=r(()=>t("th",null,"地址",-1)),rt=r(()=>t("th",null,"商品清單",-1)),nt={class:"text-break"},lt={class:"table table-striped table-bordered"},dt=r(()=>t("thead",null,[t("tr",null,[t("th",null,"商品名稱"),t("th",null,"單價"),t("th",null,"數量"),t("th",null,"小計")])],-1)),at=r(()=>t("th",null,"訂單總計",-1)),ut=r(()=>t("th",null,"備註",-1)),it=r(()=>t("th",null,"付款方式",-1)),ct=r(()=>t("th",null,"付款狀態",-1)),_t={scope:"row",colspan:"2"},pt=r(()=>t("div",null," 轉帳資訊:中華郵政(700)-1234567 ",-1)),ht={class:"d-flex justify-content-center"};function mt(n,e,p,h,s,i){var f,v,I,b,y,g,x,k,D,w,O,S,E,B,T,V,C;const _=c("v-stepper-item"),m=c("v-divider"),N=c("v-stepper-header"),R=c("v-stepper");return a(),u("div",Q,[d(R,{class:"stepper-transparent","model-value":"3"},{default:A(()=>[d(N,null,{default:A(()=>[d(_,{title:"購物車確認",value:"1"}),d(m),d(_,{title:"填寫訂購資料",value:"2"}),d(m),d(_,{title:"確認付款",value:"3"})]),_:1})]),_:1}),t("table",W,[t("tbody",null,[t("tr",null,[X,t("td",null,o(i.formatDate((f=s.orderInfo)==null?void 0:f.create_at)),1)]),t("tr",null,[Z,t("td",null,o((v=s.orderInfo)==null?void 0:v.id),1)]),t("tr",null,[tt,t("td",null,o((b=(I=s.orderInfo)==null?void 0:I.user)==null?void 0:b.name),1)]),t("tr",null,[et,t("td",null,o((g=(y=s.orderInfo)==null?void 0:y.user)==null?void 0:g.email),1)]),t("tr",null,[st,t("td",null,o((k=(x=s.orderInfo)==null?void 0:x.user)==null?void 0:k.tel),1)]),t("tr",null,[ot,t("td",null,o((w=(D=s.orderInfo)==null?void 0:D.user)==null?void 0:w.address),1)]),t("tr",null,[rt,t("td",nt,[t("table",lt,[dt,t("tbody",null,[(a(!0),u(H,null,U(s.orderInfo.products,(l,$)=>(a(),u("tr",{key:$},[t("td",null,o(l.product.title),1),t("td",null,o(l.product.price),1),t("td",null,o(l.qty),1),t("td",null,o(l.total),1)]))),128))])])])]),t("tr",null,[at,t("td",null,"NT$ "+o((O=s.orderInfo)==null?void 0:O.total),1)]),t("tr",null,[ut,t("td",null,o((S=s.orderInfo)==null?void 0:S.message),1)]),t("tr",null,[it,t("td",null,o(((B=(E=s.orderInfo)==null?void 0:E.user)==null?void 0:B.payment)==="credit-card"?"信用卡付款":"銀行轉帳"),1)]),t("tr",null,[ct,t("td",{class:z([(T=s.orderInfo)!=null&&T.is_paid?"text-success":"text-danger"])},o((V=s.orderInfo)!=null&&V.is_paid?"已完成付款":"審核中..."),3)])]),t("tfoot",null,[t("tr",null,[t("th",_t,[pt,t("div",ht,[(C=s.orderInfo)!=null&&C.is_paid?(a(),u("button",{key:0,type:"button",class:"btn returnBtn rounded",onClick:e[0]||(e[0]=M(l=>{this.$router.push("/")},["prevent"]))},"返回首頁")):(a(),u("button",{key:1,type:"button",class:"btn btn-primary cardBtn",onClick:e[1]||(e[1]=M((...l)=>i.payOrder&&i.payOrder(...l),["prevent"]))},"確認付款"))])])])])])])}const bt=q(K,[["render",mt],["__scopeId","data-v-7def9158"]]);export{bt as default};
