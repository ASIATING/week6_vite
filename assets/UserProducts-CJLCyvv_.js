import{a as m}from"./axios-Bo0ATomq.js";import{_ as k,M as $,o as l,c as n,a as t,t as e,i as T,v as I,r as h,F as _,f as g,b as y,g as f,n as E,e as V,w as A,j as B,k as x,d as P}from"./index-Dib2dAOW.js";import{P as L}from"./PaginationArea-0oHxBXi7.js";const F={props:["tempProduct"],data(){return{oductModal:null,qty:1}},mounted(){this.productModal=new $(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal(){console.log(this.productModal),this.productModal.show()},hideModal(){this.productModal.hide()}}},N={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},S={class:"modal-dialog modal-xl",role:"document"},U={class:"modal-content border-0"},q={class:"modal-header bg-dark text-white"},D={class:"modal-title",id:"exampleModalLabel"},z=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),R={class:"modal-body"},j={class:"row"},H={class:"col-sm-6"},O=["src"],W={class:"col-sm-6"},X={class:"badge bg-primary rounded-pill"},G={class:"h5"},J={class:"h6"},K={class:"h5"},Q={class:"input-group"};function Y(d,a,s,r,i,c){return l(),n("div",N,[t("div",S,[t("div",U,[t("div",q,[t("h5",D,[t("span",null,e(s.tempProduct.title),1)]),z]),t("div",R,[t("div",j,[t("div",H,[t("img",{class:"img-fluid",src:s.tempProduct.imageUrl,alt:""},null,8,O)]),t("div",W,[t("span",X,e(),1),t("p",null,"商品描述："+e(s.tempProduct.description),1),t("p",null,"商品內容："+e(s.tempProduct.content),1),t("div",G,e(s.tempProduct.origin_price)+" 元",1),t("del",J,"原價 "+e(s.tempProduct.origin_price)+" 元",1),t("div",K,"現在只要 "+e(s.tempProduct.price)+" 元",1),t("div",null,[t("div",Q,[T(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":a[0]||(a[0]=u=>i.qty=u)},null,512),[[I,i.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:a[1]||(a[1]=u=>d.$emit("addToCart",s.tempProduct.id,i.qty))},"加入購物車")])])])])])])])],512)}const Z=k(F,[["render",Y]]),p="/week6_vite/assets/catFoot-CXFWhRkf.png";var tt={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:b,VITE_PATH:v}=tt,st={components:{UserProductModal:Z,paginationArea:L},data(){return{isLoading:!0,products:[],cart:{},qty:1,tempProduct:{},productModal:null,loadingItem:"",pagination:{}}},mounted(){this.getProducts()},methods:{getProducts(d){this.isLoading=!0;const a=`${b}/api/${v}/products?page=${d||1}`;m.get(a).then(s=>{this.isLoading=!1,this.pagination=s.data.pagination,console.log(this.pagination),this.products=s.data.products}).catch(s=>{this.isLoading=!1,alert(s.response.data.message)})},getProduct(d){this.loadingItem=d;const a=`${b}/api/${v}/product/${d}`;m.get(a).then(s=>{this.loadingItem="",this.tempProduct=s.data.product,this.$refs.userProductModal.openModal()}).catch(s=>{alert(s.response.data.message),this.loadingItem=""})},addToCart(d,a=1){this.loadingItem=d;const s=`${b}/api/${v}/cart`;m.post(s,{data:{product_id:d,qty:a}}).then(r=>{this.loadingItem="",this.$refs.userProductModal.hideModal(),this.getCart()}).catch(r=>{alert(r.response.data.message)})}}},ot={class:"container mt-5"},et={class:"row"},at={class:"col-md-4"},dt={class:"sideBar"},it=f('<h3 class="fw-bold">搜尋您要的商品</h3><input type="text" class="form-control mb-3" placeholder="搜尋關鍵字"><h3 class="fw-bold">商品分類</h3><ul class="list-group"><li class="list-group-item"><input type="radio" name="options" id="option1"><label for="option1">全部商品</label><img src="'+p+'" alt="導覽圖"></li><li class="list-group-item"><input type="radio" name="options" id="option2"><label for="option2">捐贈浪浪品項</label><img src="'+p+'" alt="導覽圖"></li><li class="list-group-item"><input type="radio" name="options" id="option3"><label for="option3">寵物周邊</label><img src="'+p+'" alt="導覽圖"></li><li class="list-group-item"><input type="radio" name="options" id="option4"><label for="option4">最新上架</label><img src="'+p+'" alt="導覽圖"></li></ul>',4),lt={class:"d-none d-md-block"},nt=t("h5",{class:"fw-bold mt-5"},"近期熱賣",-1),ct={id:"carouselExampleFade",class:"carousel slide carousel-fade","data-bs-ride":"carousel"},rt={class:"carousel-inner"},ut=t("div",null,"飼料",-1),pt=t("div",null,"300/次",-1),mt=f('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2),ht={class:"col-md-8"},_t=t("h3",{class:"fw-bold"},"全部商品",-1),gt=f('<div class="row g-0"><div class="col-4"><img src="https://cdn.discordapp.com/attachments/836255942999146530/1214139164417720320/photo-1517331156700-3c241d2b4d83.png?ex=65f80636&amp;is=65e59136&amp;hm=0e7d561d4afb84fbd36ed90dbf1e551603829846adae6c799a08565f44568300&amp;" class="img-fluid rounded-start" alt="商品照片"></div><div class="col-8"><div class="card-body"><h5 class="card-title fw-bold">貓咪商品1</h5><p class="card-text d-none d-md-block">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p><div class="d-flex justify-content-between align-items-end"><div><div><del>建議售價:1000</del></div><div class="fw-bold text-danger fz-3">優惠價格:900</div></div><div class="d-flex flex-column flex-md-row align-items-md-center mt-md-0 mt-3"><div class="btn btn-primary cardBtn moreBtn mb-2 mb-md-0 mr-md-3">查看更多</div><div class="btn btn-outline-primary cardBtn addToCartBtn ms-md-3">加入購物車</div></div></div></div></div></div>',1),bt=[gt],vt={class:"container"},ft={class:"mt-4"},yt={class:"table align-middle"},xt=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),Pt={style:{width:"200px"}},kt={class:"h5"},wt={class:"h6"},Mt={class:"h5"},Ct={class:"btn-group btn-group-sm"},$t=["onClick"],Tt={key:0,class:"fas fa-spinner fa-pulse"},It=["onClick"],Et={key:0,class:"fas fa-spinner fa-pulse"};function Vt(d,a,s,r,i,c){const u=h("router-link"),w=h("user-product-modal"),M=h("paginationArea");return l(),n("div",null,[t("div",ot,[t("div",et,[t("div",at,[t("div",dt,[it,t("div",lt,[nt,t("div",ct,[t("div",rt,[(l(),n(_,null,g(4,o=>t("div",{class:E(["carousel-item",o===1?"active":""]),key:o,"data-bs-interval":"1000"},[(l(),V(u,{key:0,class:"card-hotProduct card-lg",style:{"background-image":"url(https://cdn.discordapp.com/attachments/836255942999146530/1214411809411432448/photo-1548595152-f556f2d0fde5.png?ex=65f90422&is=65e68f22&hm=9296f5216ccccdec06f91b442673656f11f15abc8c0c81b58a2c52da736367ca&)"},to:"/products"},{default:A(()=>[t("h5",null,"贊助貓貓狗狗 第"+e(o)+"樣商品",1),ut,pt]),_:2},1024))],2)),64))]),mt])])])]),t("div",ht,[_t,(l(),n(_,null,g(4,o=>t("div",{key:o,class:"card productCard mb-3"},bt)),64))])])]),t("div",vt,[t("div",ft,[y(w,{ref:"userProductModal","temp-product":i.tempProduct,onAddToCart:c.addToCart},null,8,["temp-product","onAddToCart"]),t("table",yt,[xt,t("tbody",null,[(l(!0),n(_,null,g(i.products,o=>(l(),n("tr",{key:o.id},[t("td",Pt,[t("div",{style:B([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.imageUrl})`}])},null,4)]),t("td",null,e(o.title),1),t("td",null,[t("div",kt,e(o.price)+" 元",1),t("del",wt,"原價 "+e(o.origin_price)+" 元",1),t("div",Mt,"現在只要 "+e(o.price)+" 元",1)]),t("td",null,[t("div",Ct,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:C=>c.getProduct(o.id)},[i.loadingItem===o.id?(l(),n("i",Tt)):x("",!0),P(" 查看更多 ")],8,$t),t("button",{type:"button",class:"btn btn-outline-danger",onClick:C=>c.addToCart(o.id)},[i.loadingItem===o.id?(l(),n("i",Et)):x("",!0),P(" 加到購物車 ")],8,It)])])]))),128))])]),y(M,{pagination:i.pagination,onEmitPages:c.getProducts},null,8,["pagination","onEmitPages"])])])])}const Ft=k(st,[["render",Vt]]);export{Ft as default};
