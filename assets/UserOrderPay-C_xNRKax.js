import{a as A}from"./axios-Bo0ATomq.js";import{S as R}from"./sweetalert2.all-BGwUjcJq.js";import{_ as $,r as _,o as a,c as u,d,w as j,a as t,t as l,F as q,j as H,u as U,J as B,p as z,e as J}from"./index-B5qnsbtN.js";var Y={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:M,VITE_PATH:F}=Y,G={data(){return{isLoading:!0,products:[],cart:{},qty:1,orderInfo:{},productModal:null,loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},mounted(){this.getOrder(this.$route.params.id)},methods:{getOrder(n){A.get(`${M}/api/${F}/order/${n}`).then(e=>{console.log(e.data),this.orderInfo=e.data.order}).catch(e=>{alert(e.response.data.message)}),console.log("123")},payOrder(){const n=`${M}/api/${F}/pay/${this.$route.params.id}`;A.post(n).then(e=>{R.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),console.log(e.data),this.getOrder(this.$route.params.id)}).catch(e=>{alert(e.response.data.message)})},formatDate(n){const e=new Date(n*1e3),h=e.getFullYear(),p=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2);return`${h}-${p}-${o}`}}},s=n=>(z("data-v-52db0f9d"),n=n(),J(),n),K={class:"container"},Q={class:"table table-bordered table-hover align-middle"},W=s(()=>t("th",null,"訂單時間",-1)),X=s(()=>t("th",null,"訂單編號",-1)),Z=s(()=>t("th",null,"訂購人姓名",-1)),tt=s(()=>t("th",null,"聯絡信箱",-1)),et=s(()=>t("th",null,"聯絡電話",-1)),ot=s(()=>t("th",null,"地址",-1)),lt=s(()=>t("th",null,"商品清單",-1)),st={class:"text-break"},nt={class:"table table-striped table-bordered"},rt=s(()=>t("thead",null,[t("tr",null,[t("th",null,"商品名稱"),t("th",null,"單價"),t("th",null,"數量"),t("th",null,"小計")])],-1)),dt=s(()=>t("th",null,"訂單總計",-1)),at=s(()=>t("th",null,"備註",-1)),ut=s(()=>t("th",null,"付款方式",-1)),it=s(()=>t("th",null,"付款狀態",-1)),ct={scope:"row",colspan:"2"},_t=s(()=>t("div",null," 轉帳資訊:中華郵政(700)-1234567 ",-1)),ht={class:"d-flex justify-content-center"};function pt(n,e,h,p,o,i){var f,v,I,b,g,y,x,D,k,w,O,S,E,T,V,C,P;const c=_("v-stepper-item"),m=_("v-divider"),L=_("v-stepper-header");return a(),u("div",K,[d(L,{"model-value":"3"},{default:j(()=>[d(c,{title:"購物車確認",value:"1"}),d(m),d(c,{title:"填寫訂購資料",value:"2"}),d(m),d(c,{title:"確認付款",value:"3"})]),_:1}),t("table",Q,[t("tbody",null,[t("tr",null,[W,t("td",null,l(i.formatDate((f=o.orderInfo)==null?void 0:f.create_at)),1)]),t("tr",null,[X,t("td",null,l((v=o.orderInfo)==null?void 0:v.id),1)]),t("tr",null,[Z,t("td",null,l((b=(I=o.orderInfo)==null?void 0:I.user)==null?void 0:b.name),1)]),t("tr",null,[tt,t("td",null,l((y=(g=o.orderInfo)==null?void 0:g.user)==null?void 0:y.email),1)]),t("tr",null,[et,t("td",null,l((D=(x=o.orderInfo)==null?void 0:x.user)==null?void 0:D.tel),1)]),t("tr",null,[ot,t("td",null,l((w=(k=o.orderInfo)==null?void 0:k.user)==null?void 0:w.address),1)]),t("tr",null,[lt,t("td",st,[t("table",nt,[rt,t("tbody",null,[(a(!0),u(q,null,H(o.orderInfo.products,(r,N)=>(a(),u("tr",{key:N},[t("td",null,l(r.product.title),1),t("td",null,l(r.product.price),1),t("td",null,l(r.qty),1),t("td",null,l(r.total),1)]))),128))])])])]),t("tr",null,[dt,t("td",null,"NT$ "+l((O=o.orderInfo)==null?void 0:O.total),1)]),t("tr",null,[at,t("td",null,l((S=o.orderInfo)==null?void 0:S.message),1)]),t("tr",null,[ut,t("td",null,l(((T=(E=o.orderInfo)==null?void 0:E.user)==null?void 0:T.payment)==="credit-card"?"信用卡付款":"銀行轉帳"),1)]),t("tr",null,[it,t("td",{class:U([(V=o.orderInfo)!=null&&V.is_paid?"text-success":"text-danger"])},l((C=o.orderInfo)!=null&&C.is_paid?"已完成付款":"審核中..."),3)])]),t("tfoot",null,[t("tr",null,[t("th",ct,[_t,t("div",ht,[(P=o.orderInfo)!=null&&P.is_paid?(a(),u("button",{key:0,type:"button",class:"btn btn-outline-success btn-lg rounded",onClick:e[0]||(e[0]=B(r=>{this.$router.push("/")},["prevent"]))},"返回首頁")):(a(),u("button",{key:1,type:"button",class:"btn btn-outline-primary btn-lg rounded",onClick:e[1]||(e[1]=B((...r)=>i.payOrder&&i.payOrder(...r),["prevent"]))},"完成訂單"))])])])])])])}const It=$(G,[["render",pt],["__scopeId","data-v-52db0f9d"]]);export{It as default};
