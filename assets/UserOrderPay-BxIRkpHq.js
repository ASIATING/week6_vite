import{a as A}from"./axios-Bo0ATomq.js";import{S as j}from"./sweetalert2.all-twoGjwgO.js";import{_ as q,r as c,o as a,c as u,d,w as B,a as t,t as s,F as H,j as U,x as z,J as M,p as J,e as Y}from"./index-DWRIMk-I.js";var G={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"ting-hexschool",BASE_URL:"/week6_vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:F,VITE_PATH:L}=G,K={data(){return{isLoading:!0,products:[],cart:{},qty:1,orderInfo:{},productModal:null,loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},mounted(){this.getOrder(this.$route.params.id)},methods:{getOrder(n){A.get(`${F}/api/${L}/order/${n}`).then(e=>{console.log(e.data),this.orderInfo=e.data.order}).catch(e=>{alert(e.response.data.message)}),console.log("123")},payOrder(){const n=`${F}/api/${L}/pay/${this.$route.params.id}`;A.post(n).then(e=>{j.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),console.log(e.data),this.getOrder(this.$route.params.id)}).catch(e=>{alert(e.response.data.message)})},formatDate(n){const e=new Date(n*1e3),p=e.getFullYear(),h=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2);return`${p}-${h}-${o}`}}},l=n=>(J("data-v-be54c71b"),n=n(),Y(),n),Q={class:"container vh-100"},W={class:"table table-bordered table-hover align-middle"},X=l(()=>t("th",null,"訂單時間",-1)),Z=l(()=>t("th",null,"訂單編號",-1)),tt=l(()=>t("th",null,"訂購人姓名",-1)),et=l(()=>t("th",null,"聯絡信箱",-1)),ot=l(()=>t("th",null,"聯絡電話",-1)),st=l(()=>t("th",null,"地址",-1)),lt=l(()=>t("th",null,"商品清單",-1)),nt={class:"text-break"},rt={class:"table table-striped table-bordered"},dt=l(()=>t("thead",null,[t("tr",null,[t("th",null,"商品名稱"),t("th",null,"單價"),t("th",null,"數量"),t("th",null,"小計")])],-1)),at=l(()=>t("th",null,"訂單總計",-1)),ut=l(()=>t("th",null,"備註",-1)),it=l(()=>t("th",null,"付款方式",-1)),ct=l(()=>t("th",null,"付款狀態",-1)),_t={scope:"row",colspan:"2"},pt=l(()=>t("div",null," 轉帳資訊:中華郵政(700)-1234567 ",-1)),ht={class:"d-flex justify-content-center"};function mt(n,e,p,h,o,i){var f,v,b,I,g,y,x,D,k,w,O,S,E,T,V,C,P;const _=c("v-stepper-item"),m=c("v-divider"),N=c("v-stepper-header"),R=c("v-stepper");return a(),u("div",Q,[d(R,{class:"stepper-transparent","model-value":"3"},{default:B(()=>[d(N,null,{default:B(()=>[d(_,{title:"購物車確認",value:"1"}),d(m),d(_,{title:"填寫訂購資料",value:"2"}),d(m),d(_,{title:"確認付款",value:"3"})]),_:1})]),_:1}),t("table",W,[t("tbody",null,[t("tr",null,[X,t("td",null,s(i.formatDate((f=o.orderInfo)==null?void 0:f.create_at)),1)]),t("tr",null,[Z,t("td",null,s((v=o.orderInfo)==null?void 0:v.id),1)]),t("tr",null,[tt,t("td",null,s((I=(b=o.orderInfo)==null?void 0:b.user)==null?void 0:I.name),1)]),t("tr",null,[et,t("td",null,s((y=(g=o.orderInfo)==null?void 0:g.user)==null?void 0:y.email),1)]),t("tr",null,[ot,t("td",null,s((D=(x=o.orderInfo)==null?void 0:x.user)==null?void 0:D.tel),1)]),t("tr",null,[st,t("td",null,s((w=(k=o.orderInfo)==null?void 0:k.user)==null?void 0:w.address),1)]),t("tr",null,[lt,t("td",nt,[t("table",rt,[dt,t("tbody",null,[(a(!0),u(H,null,U(o.orderInfo.products,(r,$)=>(a(),u("tr",{key:$},[t("td",null,s(r.product.title),1),t("td",null,s(r.product.price),1),t("td",null,s(r.qty),1),t("td",null,s(r.total),1)]))),128))])])])]),t("tr",null,[at,t("td",null,"NT$ "+s((O=o.orderInfo)==null?void 0:O.total),1)]),t("tr",null,[ut,t("td",null,s((S=o.orderInfo)==null?void 0:S.message),1)]),t("tr",null,[it,t("td",null,s(((T=(E=o.orderInfo)==null?void 0:E.user)==null?void 0:T.payment)==="credit-card"?"信用卡付款":"銀行轉帳"),1)]),t("tr",null,[ct,t("td",{class:z([(V=o.orderInfo)!=null&&V.is_paid?"text-success":"text-danger"])},s((C=o.orderInfo)!=null&&C.is_paid?"已完成付款":"審核中..."),3)])]),t("tfoot",null,[t("tr",null,[t("th",_t,[pt,t("div",ht,[(P=o.orderInfo)!=null&&P.is_paid?(a(),u("button",{key:0,type:"button",class:"btn btn-outline-success btn-lg rounded",onClick:e[0]||(e[0]=M(r=>{this.$router.push("/")},["prevent"]))},"返回首頁")):(a(),u("button",{key:1,type:"button",class:"btn btn-outline-primary btn-lg rounded",onClick:e[1]||(e[1]=M((...r)=>i.payOrder&&i.payOrder(...r),["prevent"]))},"完成訂單"))])])])])])])}const It=q(K,[["render",mt],["__scopeId","data-v-be54c71b"]]);export{It as default};
